"use strict";(self.webpackChunkquote_rater=self.webpackChunkquote_rater||[]).push([[691],{2501:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var r={};t.r(r),t.d(r,{I:function(){return s}});var o=t(7294),u=t(2896),s="home-module--card--f-c4b",a=t(5804);function l(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return i(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var c=/### +(.*)\n```\n((?:.|\n)*?)\n—(.*)\n```\n((?:- +.+\n)*)/gm;function d(e){return{should_render:e.should_render,quotes_order:e.quotes_order,adj:e.adj,link:e.link,size:e.size,left_idx:e.left_idx,right_idx:e.right_idx,quotes_amount:e.quotes_amount,components_amount:e.components_amount,done:e.done,answers:e.answers}}function _(e,n,t){void 0===t&&(t=function(){});var r={quotes:[],url:"",answers_json:"",quotes_url_input:null,answers_json_input:null};r.quotes_url_input=e,r.answers_json_input=n,r.url=e.value,r.answers_json=n.value,m(r),function(e,n){var t=new XMLHttpRequest;t.onload=function(){200==t.status?n(t.responseText):console.error("Failed to load '"+e+"' with status "+t.status)},t.onerror=function(){console.error("Failed to load '"+e+"'")},t.open("GET",e,!0),t.send()}(r.url,(function(e){for(var n;n=c.exec(e);)r.quotes.push({origin:n[1],text:n[2],author:n[3],comments:n[4]});t(r)}))}function f(e,n){return e.answers_json=JSON.stringify(n.answers),m(e),function(e){return{quotes:e.quotes,url:e.url,answers_json:e.answers_json,quotes_url_input:e.quotes_url_input,answers_json_input:e.answers_json_input}}(e)}function m(e){var n=new URLSearchParams(location.search);n.set("quotes_url",e.url),n.set("answers_json",e.answers_json),window.history.replaceState({},"",location.pathname+"?"+n.toString()),null!=e.answers_json_input&&(e.answers_json_input.value=e.answers_json),null!=e.quotes_url_input&&(e.quotes_url_input.value=e.url)}function p(e,n){for(;n!=e.link[n];)n=e.link[n];return n}function v(e,n,t){return p(e,n)==p(e,t)}function h(e){e.quotes_order=[];for(var n=[],t=0;t<e.quotes_amount;++t)n.push(0);for(var r=e.quotes_amount-1;r>=0;--r)q(e,r,n);e.quotes_order.reverse()}function q(e,n,t){if(2!=t[n])if(1!=t[n]){t[n]=1;for(var r,o=l(e.adj[n]);!(r=o()).done;){q(e,r.value,t)}e.quotes_order.push(n),t[n]=2}else console.log("cycle detected")}function w(e,n){for(var t=[],r=0;r<e.quotes_amount;++r)t.push(!1);E(e,n,t,-1);for(var o=[],u=0;u<t.length;++u)t[u]||o.push(u);o.sort((function(){return Math.random()-.5}));for(var s=0,a=o;s<a.length;s++){var l=a[s];if(!g(e,l,n))return l}return-1}function g(e,n,t){for(var r=[],o=0;o<e.quotes_amount;++o)r.push(!1);return E(e,n,r,t)}function E(e,n,t,r){if(n==r)return!0;if(t[n])return!1;t[n]=!0;for(var o,u=l(e.adj[n]);!(o=u()).done;){if(E(e,o.value,t,r))return!0}return!1}function j(e,n,t){x(e,n,t),h(e),b(e),e.answers.push({better:n,worse:t})}function x(e,n,t){console.log(n+" better than "+t),e.adj[n].push(t),function(e,n,t){if((n=p(e,n))!=(t=p(e,t))){if(e.size[n]<e.size[t]){var r=[t,n];n=r[0],t=r[1]}e.size[n]+=e.size[t],e.link[t]=n,--e.components_amount}}(e,n,t)}function b(e){for(var n=[],t=0;t<e.quotes_amount;++t)n.push(t);if(n.sort((function(){return Math.random()-.5})),e.components_amount>1)for(var r,o=l(n);!(r=o()).done;)for(var u,s=r.value,a=l(n);!(u=a()).done;){var i=u.value;if(!v(e,s,i))return e.left_idx=s,void(e.right_idx=i)}else for(var c,d=l(n);!(c=d()).done;){var _=c.value,f=w(e,_);if(-1!=f)return e.left_idx=_,void(e.right_idx=f)}console.log("no more info required"),e.done=!0}var y=function(e){var n,t,i=(0,o.useState)({quotes:[],url:"",answers_json:"",quotes_url_input:null,answers_json_input:null}),c=i[0],m=i[1],p=(0,o.useState)({should_render:!1,quotes_order:[],adj:[],link:[],size:[],left_idx:-1,right_idx:-1,quotes_amount:0,components_amount:0,done:!1,answers:[]}),v=p[0],q=p[1];return(0,o.useEffect)((function(){var e=new URLSearchParams(location.search),n=e.get("quotes_url"),t=document.getElementById("quotes_url_input");""==t.value&&(t.value=n||"");var r=e.get("answers_json"),o=document.getElementById("answers_json_input");""==o.value&&(o.value=r||"")})),o.createElement(u.Z,null,o.createElement(a.Z,{heading:"Quote Rater"}),o.createElement("label",{htmlFor:"quotes_url_input"},"Input Quotes URL: "),o.createElement("input",{id:"quotes_url_input",type:"text"}),o.createElement("br",null),o.createElement("label",{htmlFor:"answers_json_input"},"Input Answered JSON: "),o.createElement("input",{id:"answers_json_input",type:"text"}),o.createElement("br",null),o.createElement("button",{onClick:function(){console.log("loading quotes: ..."),_(document.getElementById("quotes_url_input"),document.getElementById("answers_json_input"),(function(e){m(e),q(function(e){var n={should_render:!1,quotes_order:[],adj:[],link:[],size:[],left_idx:-1,right_idx:-1,quotes_amount:0,components_amount:0,done:!1,answers:[]};n.quotes_amount=e.quotes.length,n.should_render=!0;for(var t=0;t<n.quotes_amount;++t)n.adj.push([]),n.link[t]=t,n.size[t]=1;n.components_amount=n.quotes_amount,""!=e.answers_json&&(n.answers=JSON.parse(e.answers_json));for(var r,o=l(n.answers);!(r=o()).done;){var u=r.value;x(n,u.better,u.worse)}return h(n),b(n),n}(e)),console.log("loading quotes: ok")}))}},"Load"),v.should_render&&o.createElement("div",null,o.createElement("p",null,"quotes: ",v.quotes_amount),o.createElement("p",null,"components: ",v.components_amount),o.createElement("p",null,"answered questions: ",v.answers.length),!v.done&&o.createElement("div",null,o.createElement("button",{onClick:function(){q((function(e){var n=function(e){return j(e,e.left_idx,e.right_idx),d(e)}(e);return m((function(e){return f(e,n)})),n}))}},"First Better"),o.createElement("button",{onClick:function(){q((function(e){var n=function(e){return b(e),d(e)}(e);return m((function(e){return f(e,n)})),n}))}},"Roughly Equal"),o.createElement("button",{onClick:function(){q((function(e){var n=function(e){return j(e,e.right_idx,e.left_idx),d(e)}(e);return m((function(e){return f(e,n)})),n}))}},"Second Better"),o.createElement("div",{className:r.cards},o.createElement("div",{className:s},o.createElement("pre",null,o.createElement("code",null,null===(n=function(e,n){if(!(n.left_idx>=e.quotes.length))return e.quotes[n.left_idx]}(c,v))||void 0===n?void 0:n.text))),o.createElement("div",{className:s},o.createElement("pre",null,o.createElement("code",null,null===(t=function(e,n){if(!(n.right_idx>=e.quotes.length))return e.quotes[n.right_idx]}(c,v))||void 0===t?void 0:t.text))))),o.createElement("h1",null,"Ordered Quotes:"),o.createElement("pre",null,o.createElement("code",null,function(e,n){for(var t,r="",o=l(n.quotes_order);!(t=o()).done;){var u=t.value,s=e.quotes[u];r+="### "+s.origin+"\n```\n"+s.text+"\n—"+s.author+"\n```\n"+s.comments+"\n"}return r}(c,v)))))}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-3d1c0ec3ae60f4779f66.js.map
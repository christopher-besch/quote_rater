"use strict";(self.webpackChunkquote_rater=self.webpackChunkquote_rater||[]).push([[691],{2501:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var o={};n.r(o),n.d(o,{I:function(){return i}});var r=n(7294),u=n(2896),i="home-module--card--f-c4b",a=n(5804);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var c=/### +(.*)\n```\n((?:.|\n)*?)\n—(.*)\n```\n((?:- +.+\n)*)/gm;function d(e){return{should_render:e.should_render,quotes_order:e.quotes_order,adj:e.adj,link:e.link,size:e.size,left_idx:e.left_idx,right_idx:e.right_idx,quotes_amount:e.quotes_amount,components_amount:e.components_amount,questions_amount:e.questions_amount,done:e.done}}function f(e,t){void 0===e&&(e=""),void 0===t&&(t=function(){});var n={quotes:[],url:""};n.url=e,function(e,t){var n=new XMLHttpRequest;n.onload=function(){200==n.status?t(n.responseText):console.error("Failed to load '"+e+"' with status "+n.status)},n.onerror=function(){console.error("Failed to load '"+e+"'")},n.open("GET",e,!0),n.send()}(e,(function(e){for(var o;o=c.exec(e);)n.quotes.push({origin:o[1],text:o[2],author:o[3],comments:o[4]});t(n)}))}function m(e,t){for(;t!=e.link[t];)t=e.link[t];return t}function _(e,t,n){return m(e,t)==m(e,n)}function h(e,t,n){if((t=m(e,t))!=(n=m(e,n))){if(e.size[t]<e.size[n]){var o=[n,t];t=o[0],n=o[1]}e.size[t]+=e.size[n],e.link[n]=t,--e.components_amount}}function v(e){e.quotes_order=[];for(var t=[],n=0;n<e.quotes_amount;++n)t.push(0);for(var o=e.quotes_amount-1;o>=0;--o)q(e,o,t);e.quotes_order.reverse()}function q(e,t,n){if(2!=n[t])if(1!=n[t]){n[t]=1;for(var o,r=l(e.adj[t]);!(o=r()).done;){q(e,o.value,n)}e.quotes_order.push(t),n[t]=2}else console.log("cycle detected")}function p(e,t){for(var n=[],o=0;o<e.quotes_amount;++o)n.push(!1);x(e,t,n,-1);for(var r=[],u=0;u<n.length;++u)n[u]||r.push(u);r.sort((function(){return Math.random()-.5}));for(var i=0,a=r;i<a.length;i++){var l=a[i];if(!g(e,l,t))return l}return-1}function g(e,t,n){for(var o=[],r=0;r<e.quotes_amount;++r)o.push(!1);return x(e,t,o,n)}function x(e,t,n,o){if(t==o)return!0;if(n[t])return!1;n[t]=!0;for(var r,u=l(e.adj[t]);!(r=u()).done;){if(x(e,r.value,n,o))return!0}return!1}function E(e){for(var t=[],n=0;n<e.quotes_amount;++n)t.push(n);if(t.sort((function(){return Math.random()-.5})),e.components_amount>1)for(var o,r=l(t);!(o=r()).done;)for(var u,i=o.value,a=l(t);!(u=a()).done;){var s=u.value;if(!_(e,i,s))return e.left_idx=i,void(e.right_idx=s)}else for(var c,d=l(t);!(c=d()).done;){var f=c.value,m=p(e,f);if(-1!=m)return e.left_idx=f,void(e.right_idx=m)}console.log("no more info required"),e.done=!0}var b=function(e){var t,n,s=(0,r.useState)({quotes:[],url:""}),c=s[0],m=s[1],_=(0,r.useState)({should_render:!1,quotes_order:[],adj:[],link:[],size:[],left_idx:-1,right_idx:-1,quotes_amount:0,components_amount:0,questions_amount:0,done:!1}),q=_[0],p=_[1];return(0,r.useEffect)((function(){var e=new URLSearchParams(location.search).get("quotes_url"),t=document.getElementById("quotes_url_input");""==t.value&&(t.value=e||"")})),r.createElement(u.Z,null,r.createElement(a.Z,{heading:"Quote Rater"}),r.createElement("label",{htmlFor:"quotes_url_input"},"Input Quotes URL: "),r.createElement("input",{id:"quotes_url_input",type:"text"}),r.createElement("br",null),r.createElement("button",{onClick:function(){var e=new URLSearchParams(location.search),t=document.getElementById("quotes_url_input").value;e.set("quotes_url",t),window.history.replaceState({},"",location.pathname+"?"+e.toString()),console.log("loading quotes: ..."),f(t,(function(e){m(e),p((function(t){return function(e){var t={should_render:!1,quotes_order:[],adj:[],link:[],size:[],left_idx:-1,right_idx:-1,quotes_amount:0,components_amount:0,questions_amount:0,done:!1};t.quotes_amount=e.quotes.length,t.should_render=!0;for(var n=0;n<t.quotes_amount;++n)t.adj.push([]),t.link[n]=n,t.size[n]=1;return t.components_amount=t.quotes_amount,v(t),E(t),t}(e)})),console.log("loading quotes: ok")}))}},"Load"),q.should_render&&r.createElement("div",null,r.createElement("p",null,"quotes: ",q.quotes_amount),r.createElement("p",null,"components: ",q.components_amount),r.createElement("p",null,"answered questions: ",q.questions_amount),!q.done&&r.createElement("div",null,r.createElement("button",{onClick:function(){p((function(e){return function(e){return console.log(e.left_idx+" better than "+e.right_idx),e.adj[e.left_idx].push(e.right_idx),h(e,e.left_idx,e.right_idx),v(e),E(e),++e.questions_amount,d(e)}(e)}))}},"First Better"),r.createElement("button",{onClick:function(){p((function(e){return function(e){return E(e),d(e)}(e)}))}},"Roughly Equal"),r.createElement("button",{onClick:function(){p((function(e){return function(e){return console.log(e.right_idx+" better than "+e.left_idx),e.adj[e.right_idx].push(e.left_idx),h(e,e.left_idx,e.right_idx),v(e),E(e),++e.questions_amount,d(e)}(e)}))}},"Second Better"),r.createElement("div",{className:o.cards},r.createElement("div",{className:i},r.createElement("pre",null,r.createElement("code",null,null===(t=function(e,t){if(!(t.left_idx>=e.quotes.length))return e.quotes[t.left_idx]}(c,q))||void 0===t?void 0:t.text))),r.createElement("div",{className:i},r.createElement("pre",null,r.createElement("code",null,null===(n=function(e,t){if(!(t.right_idx>=e.quotes.length))return e.quotes[t.right_idx]}(c,q))||void 0===n?void 0:n.text))))),r.createElement("h1",null,"Ordered Quotes:"),r.createElement("pre",null,r.createElement("code",null,function(e,t){for(var n,o="",r=l(t.quotes_order);!(n=r()).done;){var u=n.value,i=e.quotes[u];o+="### "+i.origin+"\n```\n"+i.text+"\n—"+i.author+"\n```\n"+i.comments+"\n"}return o}(c,q)))))}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-f4fc980e66401749695b.js.map